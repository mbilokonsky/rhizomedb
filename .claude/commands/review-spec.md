Review spec/spec.md for internal consistency and alignment with the current TypeScript implementation. Check that:
1. All interfaces defined in the spec match the TypeScript code
2. Examples in the spec are consistent with the implementation
3. Section numbering is correct
4. No broken internal references exist
